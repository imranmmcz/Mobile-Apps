import 'package:flutter/material.dart';
import '../utils/app_theme.dart';

class AIAssistantScreen extends StatefulWidget {
  const AIAssistantScreen({super.key});

  @override
  State<AIAssistantScreen> createState() => _AIAssistantScreenState();
}

class _AIAssistantScreenState extends State<AIAssistantScreen> with SingleTickerProviderStateMixin {
  final TextEditingController _messageController = TextEditingController();
  final List<ChatMessage> _messages = [];
  final ScrollController _scrollController = ScrollController();
  late TabController _tabController;

  @override
  void initState() {
    super.initState();
    _tabController = TabController(length: 4, vsync: this);
    // Add welcome message
    _messages.add(ChatMessage(
      text: '‡¶®‡¶Æ‡¶∏‡ßç‡¶ï‡¶æ‡¶∞! ‡¶Ü‡¶Æ‡¶ø Fish Care AI Assistant‡•§ ‡¶Æ‡¶æ‡¶õ ‡¶ö‡¶æ‡¶∑ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡¶ø‡¶§ ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶ó‡¶¨‡ßá‡¶∑‡¶£‡¶æ-‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂ ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§ ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
      isUser: false,
      timestamp: DateTime.now(),
    ));
  }

  @override
  void dispose() {
    _messageController.dispose();
    _scrollController.dispose();
    _tabController.dispose();
    super.dispose();
  }

  void _sendMessage() {
    if (_messageController.text.trim().isEmpty) return;

    final userMessage = _messageController.text;
    setState(() {
      _messages.add(ChatMessage(
        text: userMessage,
        isUser: true,
        timestamp: DateTime.now(),
      ));
    });

    _messageController.clear();

    // Simulate AI response with research-based data
    Future.delayed(const Duration(milliseconds: 800), () {
      final response = _getResearchBasedResponse(userMessage);
      setState(() {
        _messages.add(ChatMessage(
          text: response,
          isUser: false,
          timestamp: DateTime.now(),
        ));
      });
      _scrollToBottom();
    });
  }

  void _scrollToBottom() {
    Future.delayed(const Duration(milliseconds: 100), () {
      if (_scrollController.hasClients) {
        _scrollController.animateTo(
          _scrollController.position.maxScrollExtent,
          duration: const Duration(milliseconds: 300),
          curve: Curves.easeOut,
        );
      }
    });
  }

  String _getResearchBasedResponse(String question) {
    final q = question.toLowerCase();

    // Fish diseases with research-based treatment
    if (q.contains('‡¶∞‡ßã‡¶ó') || q.contains('disease') || q.contains('‡¶∏‡¶æ‡¶¶‡¶æ ‡¶¶‡¶æ‡¶ó') || q.contains('‡¶≤‡¶æ‡¶≤ ‡¶¶‡¶æ‡¶ó')) {
      return '''üî¨ **‡¶ó‡¶¨‡ßá‡¶∑‡¶£‡¶æ-‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï ‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶∞‡ßã‡¶ó ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ**

**‡ßß. ‡¶∏‡¶æ‡¶¶‡¶æ ‡¶¶‡¶æ‡¶ó ‡¶∞‡ßã‡¶ó (Ichthyophthiriasis)**
üìä ‡¶ó‡¶¨‡ßá‡¶∑‡¶£‡¶æ ‡¶§‡¶•‡ßç‡¶Ø:
- ‡¶™‡ßç‡¶Ø‡¶æ‡¶•‡ßã‡¶ú‡ßá‡¶®: Ichthyophthirius multifiliis
- ‡¶§‡¶æ‡¶™‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ: ‡ßß‡ß´-‡ß®‡ß´¬∞C ‡¶è ‡¶¨‡ßá‡¶∂‡¶ø ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º
- ‡¶Æ‡ßÉ‡¶§‡ßç‡¶Ø‡ßÅ‡¶π‡¶æ‡¶∞: ‡ß™‡ß¶-‡ßÆ‡ß¶% (‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ ‡¶®‡¶æ ‡¶ï‡¶∞‡¶≤‡ßá)

‚úÖ **‡¶™‡ßç‡¶∞‡¶Æ‡¶æ‡¶£‡¶ø‡¶§ ‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ:**
1. ‡¶´‡¶∞‡ßç‡¶Æ‡¶æ‡¶≤‡¶ø‡¶® ‡ß®‡ß´ ‡¶™‡¶ø‡¶™‡¶ø‡¶è‡¶Æ (‡ß®‡ß™ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ)
2. ‡¶§‡¶æ‡¶™‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ ‡ß©‡ß¶¬∞C ‡¶è ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
3. ‡¶≤‡¶¨‡¶£ ‡ßß‡ß¶-‡ßß‡ß´ ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ/‡¶≤‡¶ø‡¶ü‡¶æ‡¶∞ (‡ß´-‡ß≠ ‡¶¶‡¶ø‡¶®)

**‡ß®. ‡¶≤‡¶æ‡¶≤ ‡¶¶‡¶æ‡¶ó/EUS (Epizootic Ulcerative Syndrome)**
üìä ‡¶ó‡¶¨‡ßá‡¶∑‡¶£‡¶æ ‡¶§‡¶•‡ßç‡¶Ø:
- ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ: Aeromonas hydrophila
- ‡¶õ‡¶§‡ßç‡¶∞‡¶æ‡¶ï: Aphanomyces spp.
- ‡¶™‡¶æ‡¶®‡¶ø‡¶∞ pH: 6.5 ‡¶è‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá ‡¶¨‡ßá‡¶∂‡¶ø ‡¶π‡¶Ø‡¶º

‚úÖ **‡¶™‡ßç‡¶∞‡¶Æ‡¶æ‡¶£‡¶ø‡¶§ ‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ:**
1. ‡¶Ö‡¶ï‡ßç‡¶∏‡¶ø‡¶ü‡ßá‡¶ü‡ßç‡¶∞‡¶æ‡¶∏‡¶æ‡¶á‡¶ï‡ßç‡¶≤‡¶ø‡¶® ‡ß´‡ß¶-‡ß≠‡ß´ ‡¶Æ‡¶ø‡¶ó‡ßç‡¶∞‡¶æ/‡¶ï‡ßá‡¶ú‡¶ø ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞‡ßá
2. ‡¶™‡¶ü‡¶æ‡¶∂ ‡¶™‡¶æ‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ô‡ßç‡¶ó‡¶æ‡¶®‡ßá‡¶ü ‡ß®-‡ß© ‡¶™‡¶ø‡¶™‡¶ø‡¶è‡¶Æ
3. ‡¶ö‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó ‡¶ï‡¶∞‡ßá pH ‡ß≠-‡ßÆ ‡¶è ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®

üìö ‡¶§‡¶•‡ßç‡¶Ø‡¶∏‡ßÇ‡¶§‡ßç‡¶∞: Bangladesh Fisheries Research Institute (BFRI)''';
    }

    // Fish production and farming
    if (q.contains('‡¶â‡ßé‡¶™‡¶æ‡¶¶‡¶®') || q.contains('‡¶ö‡¶æ‡¶∑') || q.contains('production') || q.contains('farming')) {
      return '''üåæ **‡¶ó‡¶¨‡ßá‡¶∑‡¶£‡¶æ-‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï ‡¶Æ‡¶æ‡¶õ ‡¶â‡ßé‡¶™‡¶æ‡¶¶‡¶® ‡¶ï‡ßå‡¶∂‡¶≤**

**‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá ‡¶∞‡ßÅ‡¶á ‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶æ‡¶õ ‡¶ö‡¶æ‡¶∑**
üìä ‡¶Ü‡¶¶‡¶∞‡ßç‡¶∂ ‡¶Æ‡¶ú‡ßÅ‡¶¶ ‡¶Ö‡¶®‡ßÅ‡¶™‡¶æ‡¶§ (‡¶π‡ßá‡¶ï‡ßç‡¶ü‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø):
- ‡¶ï‡¶æ‡¶§‡¶≤‡¶æ: ‡ßß,‡ß´‡ß¶‡ß¶ (‡ß©‡ß¶%)
- ‡¶∞‡ßÅ‡¶á: ‡ß®,‡ß¶‡ß¶‡ß¶ (‡ß™‡ß¶%)
- ‡¶Æ‡ßÉ‡¶ó‡ßá‡¶≤: ‡ßß,‡ß¶‡ß¶‡ß¶ (‡ß®‡ß¶%)
- ‡¶∏‡¶ø‡¶≤‡¶≠‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶™: ‡ß´‡ß¶‡ß¶ (‡ßß‡ß¶%)

**‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶∂‡¶ø‡¶§ ‡¶â‡ßé‡¶™‡¶æ‡¶¶‡¶®:**
‚úÖ ‡¶Æ‡¶ø‡¶∂‡ßç‡¶∞ ‡¶ö‡¶æ‡¶∑: ‡ß©,‡ß¶‡ß¶‡ß¶-‡ß´,‡ß¶‡ß¶‡ß¶ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶π‡ßá‡¶ï‡ßç‡¶ü‡¶∞/‡¶¨‡¶õ‡¶∞
‚úÖ ‡¶®‡¶ø‡¶¨‡¶ø‡¶°‡¶º ‡¶ö‡¶æ‡¶∑: ‡ß¨,‡ß¶‡ß¶‡ß¶-‡ßÆ,‡ß¶‡ß¶‡ß¶ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶π‡ßá‡¶ï‡ßç‡¶ü‡¶∞/‡¶¨‡¶õ‡¶∞
‚úÖ ‡¶Ö‡¶§‡¶ø ‡¶®‡¶ø‡¶¨‡¶ø‡¶°‡¶º: ‡ßß‡ß¶,‡ß¶‡ß¶‡ß¶+ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶π‡ßá‡¶ï‡ßç‡¶ü‡¶∞/‡¶¨‡¶õ‡¶∞

**‡¶™‡¶æ‡¶®‡¶ø‡¶∞ ‡¶ó‡ßÅ‡¶£‡¶Æ‡¶æ‡¶® (‡¶Ü‡¶¶‡¶∞‡ßç‡¶∂ ‡¶Æ‡¶æ‡¶®):**
- pH: ‡ß≠.‡ß¶-‡ßÆ.‡ß´
- ‡¶§‡¶æ‡¶™‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ: ‡ß®‡ß´-‡ß©‡ß¶¬∞C
- ‡¶¶‡ßç‡¶∞‡¶¨‡ßÄ‡¶≠‡ßÇ‡¶§ ‡¶Ö‡¶ï‡ßç‡¶∏‡¶ø‡¶ú‡ßá‡¶®: >‡ß´ ‡¶Æ‡¶ø‡¶ó‡ßç‡¶∞‡¶æ/‡¶≤‡¶ø‡¶ü‡¶æ‡¶∞
- ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡ßã‡¶®‡¶ø‡¶Ø‡¶º‡¶æ: <‡ß¶.‡ß¶‡ß® ‡¶Æ‡¶ø‡¶ó‡ßç‡¶∞‡¶æ/‡¶≤‡¶ø‡¶ü‡¶æ‡¶∞

**‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ:**
- ‡¶™‡ßã‡¶®‡¶æ (‡ßß-‡ß´ ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ): ‡¶∂‡¶∞‡ßÄ‡¶∞‡ßá‡¶∞ ‡¶ì‡¶ú‡¶®‡ßá‡¶∞ ‡ß´-‡ßÆ%
- ‡¶Ü‡¶ô‡ßÅ‡¶≤‡¶ø‡¶™‡ßã‡¶®‡¶æ (‡ß´-‡ß®‡ß´ ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ): ‡ß©-‡ß´%
- ‡¶¨‡¶°‡¶º ‡¶Æ‡¶æ‡¶õ (‡ß®‡ß´+ ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ): ‡ß®-‡ß©%

üìö ‡¶§‡¶•‡ßç‡¶Ø‡¶∏‡ßÇ‡¶§‡ßç‡¶∞: WorldFish Bangladesh & Department of Fisheries''';
    }

    // Fish food and nutrition
    if (q.contains('‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞') || q.contains('‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø') || q.contains('‡¶™‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø') || q.contains('food') || q.contains('nutrition')) {
      return '''üçΩÔ∏è **‡¶ó‡¶¨‡ßá‡¶∑‡¶£‡¶æ-‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï ‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶™‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ**

**‡¶Ü‡¶¶‡¶∞‡ßç‡¶∂ ‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø ‡¶â‡¶™‡¶æ‡¶¶‡¶æ‡¶® (‡¶∞‡ßÅ‡¶á ‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶æ‡¶õ):**

üî¨ **‡¶™‡ßç‡¶∞‡ßã‡¶ü‡¶ø‡¶®:**
- ‡¶™‡ßã‡¶®‡¶æ ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º: ‡ß©‡ß´-‡ß™‡ß¶%
- ‡¶¨‡¶æ‡¶°‡¶º‡¶®‡ßç‡¶§ ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º: ‡ß®‡ßÆ-‡ß©‡ß®%
- ‡¶¨‡¶°‡¶º ‡¶Æ‡¶æ‡¶õ: ‡ß®‡ß´-‡ß®‡ßÆ%

üî¨ **‡¶∂‡¶ï‡ßç‡¶§‡¶ø ‡¶ì ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø:**
- ‡¶ö‡¶∞‡ßç‡¶¨‡¶ø: ‡ß´-‡ßß‡ß¶%
- ‡¶∂‡¶∞‡ßç‡¶ï‡¶∞‡¶æ: ‡ß®‡ß¶-‡ß©‡ß¶%
- ‡¶Ü‡¶Å‡¶∂: <‡ßÆ%
- ‡¶∂‡¶ï‡ßç‡¶§‡¶ø: ‡ß©,‡ß¶‡ß¶‡ß¶-‡ß©,‡ß´‡ß¶‡ß¶ ‡¶ï‡¶ø‡¶≤‡ßã‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡ßã‡¶∞‡¶ø/‡¶ï‡ßá‡¶ú‡¶ø

**‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶¨‡ßà‡¶ú‡ßç‡¶û‡¶æ‡¶®‡¶ø‡¶ï ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø:**
‚úÖ ‡¶∏‡¶Æ‡¶Ø‡¶º: ‡¶∏‡¶ï‡¶æ‡¶≤ ‡ßÆ-‡ßØ‡¶ü‡¶æ ‡¶ì ‡¶¨‡¶ø‡¶ï‡ßá‡¶≤ ‡ß™-‡ß´‡¶ü‡¶æ
‚úÖ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£: ‡¶ì‡¶ú‡¶®‡ßá‡¶∞ ‡ß®-‡ß´% (‡¶¨‡¶Ø‡¶º‡¶∏ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ)
‚úÖ ‡¶∏‡ßç‡¶•‡¶æ‡¶®: ‡¶™‡ßÅ‡¶ï‡ßÅ‡¶∞‡ßá‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶ú‡¶æ‡¶Ø‡¶º‡¶ó‡¶æ‡¶Ø‡¶º
‚úÖ ‡¶´‡ßç‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶∏‡¶ø: ‡¶¶‡¶ø‡¶®‡ßá ‡ß®-‡ß© ‡¶¨‡¶æ‡¶∞

**‡¶™‡ßç‡¶∞‡¶æ‡¶ï‡ßÉ‡¶§‡¶ø‡¶ï ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø:**
- ‡¶á‡¶â‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ: ‡ßß‡ß¶‡ß¶ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶π‡ßá‡¶ï‡ßç‡¶ü‡¶∞/‡¶¨‡¶õ‡¶∞
- ‡¶ü‡¶ø‡¶è‡¶∏‡¶™‡¶ø: ‡ß´‡ß¶ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶π‡ßá‡¶ï‡ßç‡¶ü‡¶∞/‡¶¨‡¶õ‡¶∞
- ‡¶ó‡ßã‡¶¨‡¶∞: ‡ß®,‡ß¶‡ß¶‡ß¶ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶π‡ßá‡¶ï‡ßç‡¶ü‡¶∞/‡¶¨‡¶õ‡¶∞

**‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶∞‡ßÇ‡¶™‡¶æ‡¶®‡ßç‡¶§‡¶∞ ‡¶π‡¶æ‡¶∞ (FCR):**
- ‡¶Ü‡¶¶‡¶∞‡ßç‡¶∂ FCR: ‡ßß.‡ß´-‡ß®.‡ß¶
- ‡¶Ö‡¶∞‡ßç‡¶•‡¶æ‡ßé ‡ßß ‡¶ï‡ßá‡¶ú‡¶ø ‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡ßß.‡ß´-‡ß® ‡¶ï‡ßá‡¶ú‡¶ø ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞

üìö ‡¶§‡¶•‡ßç‡¶Ø‡¶∏‡ßÇ‡¶§‡ßç‡¶∞: Bangladesh Agricultural University (BAU)''';
    }

    // Pond management
    if (q.contains('‡¶™‡ßÅ‡¶ï‡ßÅ‡¶∞') || q.contains('pond') || q.contains('‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ') || q.contains('management')) {
      return '''üíß **‡¶ó‡¶¨‡ßá‡¶∑‡¶£‡¶æ-‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï ‡¶™‡ßÅ‡¶ï‡ßÅ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ**

**‡¶™‡ßÅ‡¶ï‡ßÅ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø (‡¶¨‡ßà‡¶ú‡ßç‡¶û‡¶æ‡¶®‡¶ø‡¶ï ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø):**

**‡ßß. ‡¶∂‡ßÅ‡¶ï‡¶æ‡¶®‡ßã ‡¶ì ‡¶Æ‡¶æ‡¶ü‡¶ø ‡¶∂‡ßã‡¶ß‡¶®:**
- ‡¶∏‡¶Æ‡¶Ø‡¶º: ‡ßß‡ß´-‡ß®‡ß¶ ‡¶¶‡¶ø‡¶®
- ‡¶ö‡ßÅ‡¶®: ‡ß®‡ß´‡ß¶-‡ßß,‡ß¶‡ß¶‡ß¶ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶π‡ßá‡¶ï‡ßç‡¶ü‡¶∞ (pH ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ)
- ‡¶∞‡ßã‡¶ü‡ßá‡¶®‡¶®: ‡ß®.‡ß´ ‡¶™‡¶ø‡¶™‡¶ø‡¶è‡¶Æ (‡¶ï‡ßç‡¶∑‡¶§‡¶ø‡¶ï‡¶∞ ‡¶Æ‡¶æ‡¶õ ‡¶¶‡ßÇ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá)

**‡ß®. ‡¶™‡¶æ‡¶®‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ:**
üìä **‡¶Ü‡¶¶‡¶∞‡ßç‡¶∂ ‡¶ó‡¶≠‡ßÄ‡¶∞‡¶§‡¶æ:**
- ‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ: ‡ßß.‡ß´ ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞
- ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö: ‡ß®.‡ß´-‡ß©.‡ß¶ ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞
- ‡¶Ü‡¶¶‡¶∞‡ßç‡¶∂: ‡ß®.‡ß¶ ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞

üìä **‡¶™‡¶æ‡¶®‡¶ø‡¶∞ ‡¶∞‡¶ô:**
- ‡¶∏‡¶¨‡ßÅ‡¶ú‡¶æ‡¶≠: ‡¶Ü‡¶¶‡¶∞‡ßç‡¶∂ (‡¶™‡ßç‡¶≤‡¶æ‡¶Ç‡¶ï‡¶ü‡¶® ‡¶∏‡¶Æ‡ßÉ‡¶¶‡ßç‡¶ß)
- ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶¨‡¶æ‡¶¶‡¶æ‡¶Æ‡ßÄ: ‡¶ó‡ßç‡¶∞‡¶π‡¶£‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø
- ‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞/‡¶ï‡¶æ‡¶≤‡ßã: ‡¶Ö‡¶®‡ßÅ‡¶™‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§

**‡ß©. ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶ø‡¶§ ‡¶™‡¶∞‡ßç‡¶Ø‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£ (‡¶∏‡¶æ‡¶™‡ßç‡¶§‡¶æ‡¶π‡¶ø‡¶ï):**
‚úÖ pH ‡¶Æ‡¶æ‡¶™‡ßÅ‡¶®: ‡ß≠.‡ß¶-‡ßÆ.‡ß´ (‡¶Ü‡¶¶‡¶∞‡ßç‡¶∂)
‚úÖ ‡¶§‡¶æ‡¶™‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ: ‡ß®‡ß´-‡ß©‡ß¶¬∞C
‚úÖ ‡¶∏‡ßç‡¶¨‡¶ö‡ßç‡¶õ‡¶§‡¶æ: ‡ß®‡ß´-‡ß™‡ß¶ ‡¶∏‡ßá‡¶Æ‡¶ø (‡¶∏‡ßá‡¶ï‡ßç‡¶ï‡¶ø ‡¶°‡¶ø‡¶∏‡ßç‡¶ï)
‚úÖ ‡¶Ö‡¶ï‡ßç‡¶∏‡¶ø‡¶ú‡ßá‡¶®: >‡ß´ ‡¶Æ‡¶ø‡¶ó‡ßç‡¶∞‡¶æ/‡¶≤‡¶ø‡¶ü‡¶æ‡¶∞

**‡ß™. ‡¶∏‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó:**
**‡¶ú‡ßà‡¶¨ ‡¶∏‡¶æ‡¶∞:**
- ‡¶ó‡ßã‡¶¨‡¶∞: ‡ßß,‡ß´‡ß¶‡ß¶-‡ß®,‡ß¶‡ß¶‡ß¶ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶π‡ßá‡¶ï‡ßç‡¶ü‡¶∞ (‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞)
- ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∑‡ßç‡¶†‡¶æ: ‡ß´‡ß¶‡ß¶-‡ßÆ‡ß¶‡ß¶ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶π‡ßá‡¶ï‡ßç‡¶ü‡¶∞

**‡¶Ö‡¶ú‡ßà‡¶¨ ‡¶∏‡¶æ‡¶∞ (‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï):**
- ‡¶á‡¶â‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ: ‡ßÆ-‡ßß‡ß¶ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶π‡ßá‡¶ï‡ßç‡¶ü‡¶∞
- ‡¶ü‡¶ø‡¶è‡¶∏‡¶™‡¶ø: ‡ß™-‡ß´ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶π‡ßá‡¶ï‡ßç‡¶ü‡¶∞

**‡ß´. ‡¶¨‡¶ø‡¶™‡¶¶ ‡¶∏‡¶Ç‡¶ï‡ßá‡¶§:**
‚ö†Ô∏è ‡¶Æ‡¶æ‡¶õ ‡¶™‡¶æ‡¶®‡¶ø‡¶∞ ‡¶â‡¶™‡¶∞‡ßá ‡¶Ü‡¶∏‡¶≤‡ßá (‡¶Ö‡¶ï‡ßç‡¶∏‡¶ø‡¶ú‡ßá‡¶® ‡¶ï‡¶Æ)
‚ö†Ô∏è ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶ñ‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶¨‡¶®‡ßç‡¶ß (‡¶∞‡ßã‡¶ó/‡¶™‡¶æ‡¶®‡¶ø ‡¶ñ‡¶æ‡¶∞‡¶æ‡¶™)
‚ö†Ô∏è ‡¶™‡¶æ‡¶®‡¶ø‡¶∞ ‡¶∞‡¶ô ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® (‡¶™‡ßç‡¶≤‡¶æ‡¶Ç‡¶ï‡¶ü‡¶® ‡¶Æ‡ßÉ‡¶§‡ßç‡¶Ø‡ßÅ)

üìö ‡¶§‡¶•‡ßç‡¶Ø‡¶∏‡ßÇ‡¶§‡ßç‡¶∞: BFRI & FAO Guidelines''';
    }

    // Medicine and treatment
    if (q.contains('‡¶î‡¶∑‡¶ß') || q.contains('‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ') || q.contains('medicine') || q.contains('treatment')) {
      return '''üíä **‡¶ó‡¶¨‡ßá‡¶∑‡¶£‡¶æ-‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï ‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶î‡¶∑‡¶ß ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ**

**‡¶™‡ßç‡¶∞‡¶Æ‡¶æ‡¶£‡¶ø‡¶§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü‡¶ø‡¶¨‡¶æ‡¶Ø‡¶º‡ßã‡¶ü‡¶ø‡¶ï:**

**‡ßß. ‡¶Ö‡¶ï‡ßç‡¶∏‡¶ø‡¶ü‡ßá‡¶ü‡ßç‡¶∞‡¶æ‡¶∏‡¶æ‡¶á‡¶ï‡ßç‡¶≤‡¶ø‡¶® (OTC)**
- ‡¶°‡ßã‡¶ú: ‡ß´‡ß¶-‡ß≠‡ß´ ‡¶Æ‡¶ø‡¶ó‡ßç‡¶∞‡¶æ/‡¶ï‡ßá‡¶ú‡¶ø ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞‡ßá
- ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞: ‡ß≠-‡ßß‡ß¶ ‡¶¶‡¶ø‡¶®
- ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡¶∞: ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∞‡¶Æ‡¶£

**‡ß®. ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡ßã‡¶ï‡ßç‡¶∏‡¶ø‡¶∏‡¶ø‡¶≤‡¶ø‡¶®**
- ‡¶°‡ßã‡¶ú: ‡ß™‡ß¶-‡ßÆ‡ß¶ ‡¶Æ‡¶ø‡¶ó‡ßç‡¶∞‡¶æ/‡¶ï‡ßá‡¶ú‡¶ø ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞‡ßá
- ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞: ‡ß´-‡ß≠ ‡¶¶‡¶ø‡¶®
- ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡¶∞: ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ-‡¶™‡¶ú‡¶ø‡¶ü‡¶ø‡¶≠ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ

**‡¶∞‡¶æ‡¶∏‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡¶ï ‡¶ú‡ßÄ‡¶¨‡¶æ‡¶£‡ßÅ‡¶®‡¶æ‡¶∂‡¶ï:**

**‡ßß. ‡¶´‡¶∞‡ßç‡¶Æ‡¶æ‡¶≤‡¶ø‡¶®**
- ‡¶°‡ßã‡¶ú: ‡ß®‡ß´-‡ß©‡ß´ ‡¶™‡¶ø‡¶™‡¶ø‡¶è‡¶Æ
- ‡¶∏‡¶Æ‡¶Ø‡¶º: ‡ß®‡ß™ ‡¶ò‡¶£‡ßç‡¶ü‡¶æ
- ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡¶∞: ‡¶™‡ßç‡¶∞‡ßã‡¶ü‡ßã‡¶ú‡ßã‡¶Ø‡¶º‡¶æ, ‡¶™‡¶∞‡¶ú‡ßÄ‡¶¨‡ßÄ

**‡ß®. ‡¶™‡¶ü‡¶æ‡¶∂ ‡¶™‡¶æ‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ô‡ßç‡¶ó‡¶æ‡¶®‡ßá‡¶ü (KMnO4)**
- ‡¶°‡ßã‡¶ú: ‡ß®-‡ß© ‡¶™‡¶ø‡¶™‡¶ø‡¶è‡¶Æ
- ‡¶∏‡¶Æ‡¶Ø‡¶º: ‡ß® ‡¶ò‡¶£‡ßç‡¶ü‡¶æ
- ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡¶∞: ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ, ‡¶õ‡¶§‡ßç‡¶∞‡¶æ‡¶ï

**‡ß©. ‡¶ï‡¶™‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶≤‡¶´‡ßá‡¶ü**
- ‡¶°‡ßã‡¶ú: ‡ß¶.‡ß´-‡ß®.‡ß¶ ‡¶™‡¶ø‡¶™‡¶ø‡¶è‡¶Æ
- ‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡¶∞: ‡¶∂‡ßà‡¶¨‡¶æ‡¶≤, ‡¶™‡ßç‡¶∞‡ßã‡¶ü‡ßã‡¶ú‡ßã‡¶Ø‡¶º‡¶æ

**‡¶™‡ßç‡¶∞‡¶æ‡¶ï‡ßÉ‡¶§‡¶ø‡¶ï ‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ:**
‚úÖ ‡¶∞‡¶∏‡ßÅ‡¶®: ‡ß®% ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞‡ßá ‡¶Æ‡¶ø‡¶∂‡¶ø‡¶Ø‡¶º‡ßá (‡¶∞‡ßã‡¶ó ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∞‡ßã‡¶ß)
‚úÖ ‡¶π‡¶≤‡ßÅ‡¶¶: ‡ßß% ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞‡ßá (‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü‡¶ø-‡¶á‡¶®‡¶´‡ßç‡¶≤‡¶æ‡¶Æ‡ßá‡¶ü‡¶∞‡¶ø)
‚úÖ ‡¶®‡¶ø‡¶Æ ‡¶™‡¶æ‡¶§‡¶æ: ‡ß´-‡ßß‡ß¶ ‡¶ï‡ßá‡¶ú‡¶ø/‡ßß‡ß¶‡ß¶ ‡¶¨‡¶∞‡ßç‡¶ó‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞

**‚ö†Ô∏è ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ:**
- ‡¶î‡¶∑‡¶ß ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡ß©‡ß¶ ‡¶¶‡¶ø‡¶® ‡¶™‡¶∞ ‡¶Æ‡¶æ‡¶õ ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
- ‡¶∏‡¶†‡¶ø‡¶ï ‡¶°‡ßã‡¶ú ‡¶Æ‡ßá‡¶®‡ßá ‡¶ö‡¶≤‡ßÅ‡¶®
- ‡¶™‡¶æ‡¶®‡¶ø‡¶∞ pH ‡ß≠-‡ßÆ ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®

üìö ‡¶§‡¶•‡ßç‡¶Ø‡¶∏‡ßÇ‡¶§‡ßç‡¶∞: DoF Aquatic Animal Health Laboratory''';
    }

    // Specific fish types
    if (q.contains('‡¶∞‡ßÅ‡¶á') || q.contains('‡¶ï‡¶æ‡¶§‡¶≤‡¶æ') || q.contains('‡¶á‡¶≤‡¶ø‡¶∂') || q.contains('‡¶§‡ßá‡¶≤‡¶æ‡¶™‡¶ø‡¶Ø‡¶º‡¶æ')) {
      return '''üêü **‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø**

**‡¶∞‡ßÅ‡¶á (Rohu - Labeo rohita)**
üìä ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: ‡ß©‡ß®‡ß¶-‡ß©‡ß´‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ/‡¶ï‡ßá‡¶ú‡¶ø
- ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø: ‡ßß.‡ß´-‡ß®.‡ß´ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶¨‡¶õ‡¶∞
- ‡¶™‡¶∞‡¶ø‡¶™‡¶ï‡ßç‡¶ï‡¶§‡¶æ: ‡ß®-‡ß© ‡¶¨‡¶õ‡¶∞
- ‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø: ‡¶∏‡¶∞‡ßç‡¶¨‡¶≠‡ßÅ‡¶ï (‡¶â‡¶¶‡ßç‡¶≠‡¶ø‡¶¶ ‡¶ì ‡¶™‡ßç‡¶∞‡¶æ‡¶£‡ßÄ ‡¶™‡ßç‡¶≤‡¶æ‡¶Ç‡¶ï‡¶ü‡¶®)
- ‡¶™‡¶æ‡¶®‡¶ø‡¶∞ ‡¶∏‡ßç‡¶§‡¶∞: ‡¶Æ‡¶ß‡ßç‡¶Ø ‡¶ì ‡¶®‡¶ø‡¶ö

**‡¶ï‡¶æ‡¶§‡¶≤‡¶æ (Catla - Catla catla)**
üìä ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: ‡ß©‡ß¶‡ß¶-‡ß©‡ß™‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ/‡¶ï‡ßá‡¶ú‡¶ø
- ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø: ‡ß®-‡ß© ‡¶ï‡ßá‡¶ú‡¶ø/‡¶¨‡¶õ‡¶∞ (‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§)
- ‡¶™‡¶∞‡¶ø‡¶™‡¶ï‡ßç‡¶ï‡¶§‡¶æ: ‡ß® ‡¶¨‡¶õ‡¶∞
- ‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø: ‡¶™‡ßç‡¶∞‡¶æ‡¶£‡ßÄ ‡¶™‡ßç‡¶≤‡¶æ‡¶Ç‡¶ï‡¶ü‡¶®
- ‡¶™‡¶æ‡¶®‡¶ø‡¶∞ ‡¶∏‡ßç‡¶§‡¶∞: ‡¶â‡¶™‡¶∞‡ßá‡¶∞

**‡¶á‡¶≤‡¶ø‡¶∂ (Hilsa - Tenualosa ilisha)**
üìä ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: ‡ßß,‡ß®‡ß¶‡ß¶-‡ßß,‡ßÆ‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ/‡¶ï‡ßá‡¶ú‡¶ø
- ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø: ‡ß©‡ß¶‡ß¶-‡ß™‡ß¶‡ß¶ ‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ/‡¶¨‡¶õ‡¶∞
- ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶§‡ßç‡¶¨: ‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶æ‡¶õ
- ‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø: ‡¶™‡ßç‡¶≤‡¶æ‡¶Ç‡¶ï‡¶ü‡¶®
- ‡¶ö‡¶æ‡¶∑: ‡¶∏‡¶Æ‡ßÅ‡¶¶‡ßç‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡¶¶‡ßÄ‡¶§‡ßá ‡¶™‡ßç‡¶∞‡¶ú‡¶®‡¶®

**‡¶§‡ßá‡¶≤‡¶æ‡¶™‡¶ø‡¶Ø‡¶º‡¶æ (Tilapia - Oreochromis spp.)**
üìä ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: ‡ßß‡ßÆ‡ß¶-‡ß®‡ß®‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ/‡¶ï‡ßá‡¶ú‡¶ø
- ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø: ‡ßß-‡ßß.‡ß´ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶¨‡¶õ‡¶∞
- ‡¶™‡¶∞‡¶ø‡¶™‡¶ï‡ßç‡¶ï‡¶§‡¶æ: ‡ß™-‡ß¨ ‡¶Æ‡¶æ‡¶∏ (‡¶¶‡ßç‡¶∞‡ßÅ‡¶§)
- ‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø: ‡¶∏‡¶∞‡ßç‡¶¨‡¶≠‡ßÅ‡¶ï
- ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ: ‡¶∞‡ßã‡¶ó ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶∞‡ßã‡¶ß‡ßÄ, ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø

**‡¶Æ‡ßÉ‡¶ó‡ßá‡¶≤ (Mrigal - Cirrhinus cirrhosus)**
üìä ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: ‡ß®‡ßÆ‡ß¶-‡ß©‡ß®‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ/‡¶ï‡ßá‡¶ú‡¶ø
- ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø: ‡ßß-‡ßß.‡ß´ ‡¶ï‡ßá‡¶ú‡¶ø/‡¶¨‡¶õ‡¶∞
- ‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø: ‡¶°‡¶ø‡¶ü‡ßç‡¶∞‡¶ø‡¶ü‡¶æ‡¶∏, ‡¶§‡¶≤‡¶¶‡ßá‡¶∂‡ßÄ‡¶Ø‡¶º ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞
- ‡¶™‡¶æ‡¶®‡¶ø‡¶∞ ‡¶∏‡ßç‡¶§‡¶∞: ‡¶§‡¶≤‡¶¶‡ßá‡¶∂

üìö ‡¶§‡¶•‡ßç‡¶Ø‡¶∏‡ßÇ‡¶§‡ßç‡¶∞: DoF Market Report 2024''';
    }

    // Default response
    return '''‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶ü‡¶ø ‡¶Ü‡¶∞‡¶ì ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡ßá ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶ú‡¶æ‡¶®‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®:

üìå **‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶∞‡ßã‡¶ó:** ‡¶∏‡¶æ‡¶¶‡¶æ ‡¶¶‡¶æ‡¶ó, ‡¶≤‡¶æ‡¶≤ ‡¶¶‡¶æ‡¶ó, ‡¶õ‡¶§‡ßç‡¶∞‡¶æ‡¶ï ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∞‡¶Æ‡¶£
üìå **‡¶â‡ßé‡¶™‡¶æ‡¶¶‡¶®:** ‡¶Æ‡¶ú‡ßÅ‡¶¶ ‡¶Ö‡¶®‡ßÅ‡¶™‡¶æ‡¶§, ‡¶Ü‡¶¶‡¶∞‡ßç‡¶∂ ‡¶ò‡¶®‡¶§‡ßç‡¶¨
üìå **‡¶™‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø:** ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶â‡¶™‡¶æ‡¶¶‡¶æ‡¶®, FCR
üìå **‡¶™‡ßÅ‡¶ï‡ßÅ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ:** ‡¶™‡¶æ‡¶®‡¶ø‡¶∞ ‡¶ó‡ßÅ‡¶£‡¶Æ‡¶æ‡¶®, ‡¶∏‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó
üìå **‡¶î‡¶∑‡¶ß:** ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü‡¶ø‡¶¨‡¶æ‡¶Ø‡¶º‡ßã‡¶ü‡¶ø‡¶ï, ‡¶ú‡ßÄ‡¶¨‡¶æ‡¶£‡ßÅ‡¶®‡¶æ‡¶∂‡¶ï
üìå **‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶ú‡¶æ‡¶§‡¶ø:** ‡¶∞‡ßÅ‡¶á, ‡¶ï‡¶æ‡¶§‡¶≤‡¶æ, ‡¶á‡¶≤‡¶ø‡¶∂, ‡¶§‡ßá‡¶≤‡¶æ‡¶™‡¶ø‡¶Ø‡¶º‡¶æ

‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: "‡¶∞‡ßÅ‡¶á ‡¶Æ‡¶æ‡¶õ‡ßá‡¶∞ ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ", "‡¶™‡ßÅ‡¶ï‡ßÅ‡¶∞‡ßá‡¶∞ ‡¶™‡¶æ‡¶®‡¶ø‡¶∞ pH ‡¶ï‡¶§ ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßã?"''';
  }

  void _askCommonQuestion(String question) {
    _messageController.text = question;
    _sendMessage();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('AI Assistant'),
        actions: [
          IconButton(
            icon: const Icon(Icons.delete_outline),
            onPressed: () {
              setState(() {
                _messages.clear();
                _messages.add(ChatMessage(
                  text: '‡¶®‡¶Æ‡¶∏‡ßç‡¶ï‡¶æ‡¶∞! ‡¶Ü‡¶Æ‡¶ø Fish Care AI Assistant‡•§ ‡¶Æ‡¶æ‡¶õ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡¶ø‡¶§ ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§',
                  isUser: false,
                  timestamp: DateTime.now(),
                ));
              });
            },
            tooltip: 'Clear Chat',
          ),
        ],
        bottom: TabBar(
          controller: _tabController,
          isScrollable: true,
          tabs: const [
            Tab(icon: Icon(Icons.medical_services), text: '‡¶∞‡ßã‡¶ó'),
            Tab(icon: Icon(Icons.restaurant), text: '‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞'),
            Tab(icon: Icon(Icons.pool), text: '‡¶™‡ßÅ‡¶ï‡ßÅ‡¶∞'),
            Tab(icon: Icon(Icons.medication), text: '‡¶î‡¶∑‡¶ß'),
          ],
        ),
      ),
      body: SafeArea(
        child: Column(
          children: [
            // Common Problems Tabs
            Container(
              height: 120,
              color: Colors.grey[100],
              child: TabBarView(
                controller: _tabController,
                children: [
                  _buildCommonProblemsTab(_diseaseProblems),
                  _buildCommonProblemsTab(_foodProblems),
                  _buildCommonProblemsTab(_pondProblems),
                  _buildCommonProblemsTab(_medicineProblems),
                ],
              ),
            ),
            
            // Chat Messages
            Expanded(
              child: ListView.builder(
                controller: _scrollController,
                padding: const EdgeInsets.all(16),
                itemCount: _messages.length,
                itemBuilder: (context, index) {
                  return _buildMessageBubble(_messages[index]);
                },
              ),
            ),

            // Message Input
            Container(
              padding: const EdgeInsets.all(16),
              decoration: BoxDecoration(
                color: Colors.white,
                boxShadow: [
                  BoxShadow(
                    color: Colors.grey.withValues(alpha: 0.2),
                    blurRadius: 4,
                    offset: const Offset(0, -2),
                  ),
                ],
              ),
              child: Row(
                children: [
                  Expanded(
                    child: TextField(
                      controller: _messageController,
                      decoration: InputDecoration(
                        hintText: '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...',
                        border: OutlineInputBorder(
                          borderRadius: BorderRadius.circular(25),
                        ),
                        contentPadding: const EdgeInsets.symmetric(
                          horizontal: 20,
                          vertical: 10,
                        ),
                      ),
                      onSubmitted: (_) => _sendMessage(),
                    ),
                  ),
                  const SizedBox(width: 8),
                  FloatingActionButton(
                    onPressed: _sendMessage,
                    mini: true,
                    backgroundColor: AppTheme.primaryColor,
                    child: const Icon(Icons.send),
                  ),
                ],
              ),
            ),
          ],
        ),
      ),
    );
  }

  Widget _buildCommonProblemsTab(List<String> problems) {
    return ListView.builder(
      scrollDirection: Axis.horizontal,
      padding: const EdgeInsets.all(8),
      itemCount: problems.length,
      itemBuilder: (context, index) {
        return Container(
          margin: const EdgeInsets.only(right: 8),
          child: ActionChip(
            label: Text(problems[index]),
            onPressed: () => _askCommonQuestion(problems[index]),
            backgroundColor: AppTheme.primaryColor.withValues(alpha: 0.1),
          ),
        );
      },
    );
  }

  Widget _buildMessageBubble(ChatMessage message) {
    return Align(
      alignment: message.isUser ? Alignment.centerRight : Alignment.centerLeft,
      child: Container(
        margin: const EdgeInsets.only(bottom: 12),
        padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 10),
        constraints: BoxConstraints(
          maxWidth: MediaQuery.of(context).size.width * 0.75,
        ),
        decoration: BoxDecoration(
          color: message.isUser
              ? AppTheme.primaryColor
              : Colors.grey[200],
          borderRadius: BorderRadius.circular(16),
        ),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              message.text,
              style: TextStyle(
                color: message.isUser ? Colors.white : Colors.black87,
                fontSize: 14,
              ),
            ),
          ],
        ),
      ),
    );
  }

  // Common problems lists
  final List<String> _diseaseProblems = [
    '‡¶∏‡¶æ‡¶¶‡¶æ ‡¶¶‡¶æ‡¶ó ‡¶∞‡ßã‡¶ó',
    '‡¶≤‡¶æ‡¶≤ ‡¶¶‡¶æ‡¶ó ‡¶∞‡ßã‡¶ó',
    '‡¶õ‡¶§‡ßç‡¶∞‡¶æ‡¶ï ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∞‡¶Æ‡¶£',
    '‡¶™‡¶æ‡¶ñ‡¶®‡¶æ ‡¶™‡¶ö‡¶æ ‡¶∞‡ßã‡¶ó',
    '‡¶´‡ßÅ‡¶≤‡¶ï‡¶æ ‡¶∞‡ßã‡¶ó',
  ];

  final List<String> _foodProblems = [
    '‡¶ï‡¶§‡¶ü‡¶æ ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶¶‡ßá‡¶¨?',
    '‡¶ï‡¶ñ‡¶® ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶¶‡ßá‡¶¨?',
    '‡¶™‡ßç‡¶∞‡ßã‡¶ü‡¶ø‡¶® ‡¶ï‡¶§‡¶ü‡ßÅ‡¶ï‡ßÅ?',
    'FCR ‡¶ï‡ßÄ?',
    '‡¶™‡ßç‡¶∞‡¶æ‡¶ï‡ßÉ‡¶§‡¶ø‡¶ï ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞',
  ];

  final List<String> _pondProblems = [
    '‡¶™‡¶æ‡¶®‡¶ø‡¶∞ pH',
    '‡¶™‡ßÅ‡¶ï‡ßÅ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø',
    '‡¶∏‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó',
    '‡¶Ö‡¶ï‡ßç‡¶∏‡¶ø‡¶ú‡ßá‡¶® ‡¶ï‡¶Æ',
    '‡¶™‡¶æ‡¶®‡¶ø‡¶∞ ‡¶∞‡¶ô',
  ];

  final List<String> _medicineProblems = [
    '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü‡¶ø‡¶¨‡¶æ‡¶Ø‡¶º‡ßã‡¶ü‡¶ø‡¶ï ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞',
    '‡¶´‡¶∞‡ßç‡¶Æ‡¶æ‡¶≤‡¶ø‡¶® ‡¶°‡ßã‡¶ú',
    '‡¶ö‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó',
    '‡¶™‡ßç‡¶∞‡¶æ‡¶ï‡ßÉ‡¶§‡¶ø‡¶ï ‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ',
    '‡¶î‡¶∑‡¶ß‡ßá‡¶∞ ‡¶∏‡¶æ‡¶¨‡¶ß‡¶æ‡¶®‡¶§‡¶æ',
  ];
}

class ChatMessage {
  final String text;
  final bool isUser;
  final DateTime timestamp;

  ChatMessage({
    required this.text,
    required this.isUser,
    required this.timestamp,
  });
}
